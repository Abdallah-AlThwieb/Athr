{% extends "base.html" %}
{% block title %}ูุงุฏู ุณุนุงุฏุชู{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4 text-center">๐ ุชูุฑูุฑ ุงูุฅุฌุงุจุงุช</h2>

  {% if data %}
    <div class="alert alert-light text-center mb-4">
      ๐ฅ ุนุฏุฏ ุงูุทูุงุจ ุงููุดุงุฑููู: <strong>{{ data | map(attribute='student') | unique | list | length }}</strong> |
      ๐ ุนุฏุฏ ุงูุฅุฌุงุจุงุช: <strong>{{ data | length }}</strong> |
      ๐ ุงูุทุงูุจ ุงูุฃุนูู ููุงุทูุง: <strong class="text-success fw-bold">{{ top_student_name }}</strong> ({{ top_student_points }} ููุทุฉ)
    </div>

    <div class="table-responsive mb-5">
      <table class="table table-bordered table-striped text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>ุงูุทุงูุจ</th>
            <th>ุงูุณุคุงู</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูุฅุฌุงุจุฉ</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
            <tr>
              <td>{{ row.student }}</td>
              <td>{{ row.question }}</td>
              <td>{{ row.date }}</td>
              <td>
                {% if row.answer == 'yes' %}
                  โ ูุนู
                {% elif row.answer == 'no' %}
                  โ ูุง
                {% else %}
                  {{ row.answer }}
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info text-center my-5">
      ูุง ุชูุฌุฏ ุจูุงูุงุช ูุชุงุญุฉ ูุนุฑุถ ุงูุชูุฑูุฑ.
    </div>
  {% endif %}

  <hr class="my-5">

  <h3 class="text-success text-center mb-4 border-bottom pb-2">๐ ุฃุนูู 10 ุทูุงุจ ููุงุทูุง</h3>
  <div class="text-center mb-5">
    <img src="{{ url_for('static', filename='charts/top_students_vertical.png') }}"
         class="img-fluid rounded shadow border"
         alt="ุฃุนูู ุงูุทูุงุจ ููุงุทูุง">
  </div>

  <h3 class="text-primary text-center mb-4 border-bottom pb-2">๐ ุงูุทูุงุจ ุงูุฃูุซุฑ ุฅุฌุงุจุฉ ุจู "ูุนู" ููู ุณุคุงู</h3>
  <div class="text-center mb-5">
    <img src="{{ url_for('static', filename='charts/yes_answers_per_question.png') }}"
         class="img-fluid rounded shadow border"
         alt="ุงูุทูุงุจ ุงูุฃูุซุฑ ุฅุฌุงุจุฉ ุจู ูุนู ููู ุณุคุงู">
  </div>

  <div class="text-center mt-5">
    <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary px-4 py-2 rounded-pill">
      ๐ ุนูุฏุฉ ุฅูู ููุญุฉ ุงูุชุญูู
    </a>
  </div>
</div>
{% endblock %}
