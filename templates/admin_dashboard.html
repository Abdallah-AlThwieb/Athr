{% extends "base.html" %}
{% block title %}ูุงุฏู ุณุนุงุฏุชู{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">ููุญุฉ ุชุญูู ุงููุดุฑู</h2>

  <h4 class="text-primary mb-3">โ ุฅุถุงูุฉ ุณุคุงู:</h4>
  <form method="post" action="{{ url_for('admin.add_question') }}" class="mb-5 d-flex gap-2 flex-wrap">
    <input name="question" placeholder="ูุต ุงูุณุคุงู" required class="form-control w-50">
    <input name="points" type="number" placeholder="ุงูููุงุท" required class="form-control w-25">
    <button type="submit" class="btn btn-success">ุฅุถุงูุฉ</button>
  </form>

  <h4 class="text-primary mb-3">๐ ุงูุฃุณุฆูุฉ ุงูุญุงููุฉ:</h4>
  <div class="mb-5">
    {% for q in questions %}
      <form method="post" action="{{ url_for('admin.edit_question', question_id=q.id) }}" class="question-box rounded p-3 mb-3">
        <div class="row g-2 align-items-center">
          <div class="col-md-6">
            <input name="text" value="{{ q.text }}" class="form-control">
          </div>
          <div class="col-md-2">
            <input name="points" value="{{ q.points }}" class="form-control">
          </div>
          <div class="col-auto">
            <button type="submit" class="btn btn-outline-light btn-sm">๐พ ุชุนุฏูู</button>
            <a href="{{ url_for('admin.delete_question', question_id=q.id) }}" class="btn btn-outline-danger btn-sm">๐๏ธ ุญุฐู</a>
          </div>
        </div>
      </form>
    {% endfor %}
  </div>

  <h4 class="text-primary mb-3">๐ฅ ุงูุทูุงุจ ูููุงุทูู:</h4>
  <div class="table-responsive">
    <table class="table table-bordered table-dark table-hover text-center align-middle rounded shadow-sm overflow-hidden">
      <thead class="table-secondary text-dark">
        <tr>
          <th>ุงูุงุณู</th>
          <th>ููุงุท ุงูููู</th>
          <th>ูุฌููุน ุงูููุงุท (ุงูุฃุณุฆูุฉ)</th>
          <th>ููุงุท ุฅุถุงููุฉ</th>
          <th>ุงููุฌููุน ุงูููู</th>
          <th>ุชูุงุตูู</th>
        </tr>
      </thead>
      <tbody>
        {% for s in points_summary %}
          <tr>
            <td>{{ s.full_name }}</td>
            <td>{{ s.daily_points }}</td>
            <td>{{ s.total_points }}</td>
            <td>{{ s.manual_points }}</td>
            <td class="fw-bold">{{ s.total_points + s.manual_points }}</td>
            <td><a href="{{ url_for('admin.student_details', student_id=s.id) }}" class="btn btn-info btn-sm">๐ ุนุฑุถ</a></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="mt-4">
    <a href="{{ url_for('admin.report') }}" class="btn btn-primary">๐ ุนุฑุถ ุงูุชูุฑูุฑ ุงููุงูู</a>
  </div>
</div>
{% endblock %}
